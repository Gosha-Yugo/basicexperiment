/* =========================
   Global (mobile-first)
   ========================= */
   /* DEBUG v1 */
html { outline: 6px solid magenta !important; }

:root {
  --bg: #0b0d10;
  --panel: #151921;
  --muted: #9aa4b2;
  --text: #e6ebf0;
  --primary: #3b82f6;
  --primary-700: #2563eb;
  --danger: #ef4444;
  --ok: #10b981;
  --border: #232a36;

  /* モバイル向けの可変フォントサイズ */
  --fz-12: clamp(12px, 2.8vw, 12px);
  --fz-14: clamp(13px, 3.2vw, 14px);
  --fz-16: clamp(15px, 3.6vw, 16px);
  --fz-18: clamp(16px, 4.2vw, 18px);
  --fz-20: clamp(18px, 4.8vw, 20px);

  --radius: 14px;
}

* { box-sizing: border-box; }

html, body {
  height: 100%;
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", "ヒラギノ角ゴ ProN", Meiryo, sans-serif;
  line-height: 1.6;
  -webkit-tap-highlight-color: transparent;
}

/* iPhoneノッチ等の安全領域 */
body {
  padding-top: max(0px, env(safe-area-inset-top));
  padding-bottom: max(0px, env(safe-area-inset-bottom));
}

/* =========================
   Layout / Typography
   ========================= */
main.container {
  max-width: 720px;               /* スマホ〜タブレットで見やすい幅 */
  margin: 0 auto;
  padding: 16px clamp(12px, 4vw, 20px);
}

h1 { font-size: var(--fz-20); margin: 6px 0 16px; font-weight: 700; }
h2 { font-size: var(--fz-18); margin: 0 0 10px; font-weight: 700; }

.card {
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.18);
}
.card + .card { margin-top: 14px; }

.helper { font-size: var(--fz-12); color: var(--muted); margin-top: 6px; }
hr.sep { border: none; height: 1px; background: var(--border); margin: 14px 0; }

.badge {
  display: inline-block;
  padding: 2px 8px; border-radius: 999px; font-size: var(--fz-12);
  border: 1px solid var(--border); background: #0f131a; color: var(--muted);
}

/* =========================
   Form / Controls
   ========================= */
label { display: block; font-size: var(--fz-12); color: var(--muted); margin-bottom: 4px; }

input, select, textarea, button { font-size: var(--fz-16); }

input[type="text"],
input[type="time"],
input[type="date"],
input[type="number"],
select, textarea {
  width: 100%;
  background: #0f131a;
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: 10px;
  padding: 12px 12px;
  min-height: 44px;                 /* タップ領域 */
  outline: none;
}
input:focus, select:focus, textarea:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(59,130,246,.25);
}

.row {
  display: grid;
  grid-template-columns: 1fr;       /* スマホは縦積み */
  gap: 12px;
}
@media (min-width: 680px) { .row { grid-template-columns: 1fr 1fr; } }

.row-inline {
  display: grid;
  grid-template-columns: 1fr auto auto; /* 入力 + [-] [+] */
  gap: 8px; align-items: center;
}

button {
  appearance: none;
  border: 1px solid transparent;
  border-radius: 10px;
  background: var(--primary);
  color: #fff;
  padding: 12px 14px;
  min-height: 44px;
  font-weight: 600;
  cursor: pointer;
}
button:hover { background: var(--primary-700); }
button.ghost { background: transparent; border-color: var(--border); color: var(--text); }
button.danger { background: var(--danger); }
button.ok { background: var(--ok); }
button.iconbtn {
  background: transparent;
  border: 1px solid var(--border);
  color: var(--text);
  padding: 0 8px;
  height: 40px;
  min-width: 40px;
  border-radius: 8px;
  font-weight: 700;
}
button.iconbtn:hover { background: #0f131a; }

.toolbar { display: flex; gap: 10px; flex-wrap: wrap; }
.toolbar > button { flex: 1 1 auto; }  /* モバイルで幅広ボタン */

/* =========================
   Toast
   ========================= */
.toast {
  position: fixed; right: 16px; bottom: 16px; padding: 12px 14px;
  background: var(--panel); border: 1px solid var(--border); border-radius: 12px;
  max-width: calc(100vw - 32px);
  z-index: 1200;
}
.toast.ok { border-color: #1f5e4c; }
.toast.err { border-color: #6b1f1f; }

/* =========================
   Chips / Badges (流用)
   ========================= */
.badge-金 { background: #bfa100; color: #0b0b0b; }
.badge-銀 { background: #9aa4b2; color: #0b0b0b; }

.chip {
  font-size: var(--fz-12); padding: 2px 6px; border-radius: 8px;
  border: 1px solid var(--border); background: #0f131a; color: var(--muted);
}
.chip.on { color: #e6ebf0; border-color: #2a3342; }
.chip-self.on { background: rgba(16,185,129,0.15); }
.chip-check.on { background: rgba(59,130,246,0.15); }
.chip-gold { background: #bfa100; color: #0b0b0b; }
.chip-silver { background: #9aa4b2; color: #0b0b0b; }

.checklist { list-style: none; padding: 0; margin: 0; }
.checklist li {
  background: var(--panel);
  margin: 6px 0;
  padding: 10px 12px;
  border-radius: 8px;
  border: 1px solid var(--border);
}
.checklist li.checked { text-decoration: line-through; opacity: 0.6; }

/* =========================
   Hamburger (暗色UIに統一)
   ========================= */
.hambox {
  position: fixed;
  top: calc(10px + env(safe-area-inset-top));
  right: 10px;
  z-index: 1000;
}
.hambtn {
  width: 44px; height: 44px; padding: 8px;
  border: 1px solid var(--border);
  border-radius: 12px;
  background: #0f1720;
  cursor: pointer;
  display: grid; place-items: center;
}
.hambtn:focus {
  outline: 2px solid var(--primary);
  outline-offset: 2px;
}
.hambtn .bar {
  display: block;
  width: 20px; height: 2px;
  background: #e7eef6;
  margin: 2px 0; border-radius: 1px;
}
.hambox-panel {
  position: absolute;
  top: 54px; right: 0;
  min-width: 220px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: 12px;
  box-shadow: 0 12px 28px rgba(0,0,0,.28);
  padding: 6px;
  display: grid; gap: 4px;
}
.hamlink {
  padding: 10px 12px;
  border-radius: 8px;
  font-size: var(--fz-14);
  color: var(--text);
  text-decoration: none;
}
.hamlink:hover { background: #1a2330; }

/* =========================
   Calendar (スマホ最適化)
   既存の .cal-* / .calendar-grid を活かしつつ改善
   ========================= */

/* ヘッダ（前月/次月/今日 のナビなどを想定） */
.cal-head {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 8px;
}

/* 曜日行（.cal-week を曜日見出しとして使用想定） */
.cal-week {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
  text-align: center;
  color: var(--muted);
  font-size: var(--fz-12);
  padding: 6px 0;
}

/* 月間グリッド */
.calendar-grid {
  display: grid;
  grid-template-columns: repeat(7, minmax(42px, 1fr)); /* スマホで指が入る最小幅 */
  gap: 6px;
}

/* 日セル */
.cal-cell {
  text-align: left;
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 12px;
  padding: 10px;
  min-height: 78px;                 /* タップ領域確保 */
  cursor: pointer;
  display: flex; flex-direction: column; gap: 6px;
}
.cal-cell.dim { opacity: 0.45; }
.cal-cell.selected { outline: 2px solid var(--primary); outline-offset: -2px; }

/* 日付と内容 */
.cal-day { font-weight: 700; font-size: var(--fz-14); color: var(--text); }
.cal-day.today { color: var(--primary); }
.cal-body { display: grid; gap: 6px; margin-top: 4px; }
.cal-body .event {
  background: #18304a; border: 1px solid #1f3e5f;
  color: #d8e8ff; font-size: var(--fz-12);
  border-radius: 6px; padding: 2px 6px; width: 100%;
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}

/* タブレット以上は余白を広げる */
@media (min-width: 768px){
  .calendar-grid { gap: 8px; }
  .cal-cell { min-height: 100px; }
}

/* 週スワイプ（任意：.calendar-grid を使わず週ごとに横スクロールしたい場合）
   .cal-weeks > .cal-week-wrap(=1週間ぶんの7セル) の構造で有効
*/
.cal-weeks {
  display: grid;
  grid-auto-flow: column;
  grid-auto-columns: 100%;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  gap: 0;
}
.cal-week-wrap {
  scroll-snap-align: start;
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 6px;
}
